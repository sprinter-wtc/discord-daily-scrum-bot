name: Daily Scrum Reminder

env:
  WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}

on:
  schedule:
    - cron: '0 4 * * *'  # UTC ê¸°ì¤€, í•œêµ­ì‹œê°„ 13:00 ë§¤ì¼
  workflow_dispatch:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Reminder
        run: |
          DATE=$(date +'%Y.%m.%d')
          MESSAGE="@everyone ğŸ’¬ ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼ ì‹œê°„ì…ë‹ˆë‹¤!

          ë¨¼ì € \"[$DATE] ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼\" ì´ë¦„ìœ¼ë¡œ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œ ë’¤,
          ì•„ë˜ í¬ë§·ì— ë§ì¶° ì§„í–‰ ìƒí™©ì„ ê³µìœ í•´ì£¼ì„¸ìš” ğŸ™Œ
          
          1. ì–´ì œ í•œ ì¼
          2. ì˜¤ëŠ˜ í•  ì¼
          3. ë§‰íŒ ì "

          curl -H "Content-Type: application/json" \
               -X POST \
               -d "$(jq -n --arg msg "$MESSAGE" '{content:$msg}')" \
               ${{ env.WEBHOOK_URL }}